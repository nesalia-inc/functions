---
title: Getting Started
description: Get up and running with DeesseJS Functions in minutes
---

# Getting Started

This guide will help you get started with DeesseJS Functions. You'll learn the basic concepts and create your first type-safe API.

## Installation

Install the package using your preferred package manager:

```bash
# npm
npm install @deessejs/functions

# yarn
yarn add @deessejs/functions

# pnpm
pnpm add @deessejs/functions
```

## Your First API

Let's create a simple user management API with full type safety.

### Step 1: Define Your Context

The context contains data that's available to all your handlers (like database connection, user session, etc.):

```ts
import { defineContext } from "@deessejs/functions";

// Define the context type and provide its values
const { t, createAPI } = defineContext<{
  userId: string;
  database: {
    users: {
      find: (id: number) => Promise<any>;
      create: (data: any) => Promise<any>;
    };
  };
}>({
  userId: "user-123", // Current user ID
  database: myDatabase, // Your database instance
});
```

### Step 2: Create Queries

Queries are for **read-only** operations:

```ts
import { success } from "@deessejs/functions";
import { z } from "zod";

const getUser = t.query({
  args: z.object({
    id: z.number(),
  }),
  handler: async (ctx, args) => {
    const user = await ctx.database.users.find(args.id);
    if (!user) {
      // Return failure for not found
      return failure(
        exception({ name: "NotFound", message: `User ${args.id} not found` })
      );
    }
    return success(user);
  },
});
```

### Step 3: Create Mutations

Mutations are for **write** operations:

```ts
const createUser = t.mutation({
  args: z.object({
    name: z.string().min(2),
    email: z.string().email(),
  }),
  handler: async (ctx, args) => {
    const user = await ctx.database.users.create({
      ...args,
      createdBy: ctx.userId, // Access context
    });
    return success(user);
  },
});
```

### Step 4: Create the API

Combine your endpoints into an API:

```ts
const api = createAPI({
  getUser,
  createUser,
});
```

### Step 5: Use Your API

```ts
// Create a user
const createResult = await api.createUser({
  name: "Alice",
  email: "alice@example.com",
});

if (createResult.ok) {
  console.log("Created:", createResult.value);
} else {
  console.error("Error:", createResult.error.message);
}

// Get a user
const getResult = await api.getUser({ id: 1 });

if (getResult.ok) {
  console.log("User:", getResult.value);
} else {
  console.error("Error:", getResult.error.message);
}
```

## Complete Example

Here's a complete working example:

```ts
import { defineContext, success, failure, exception } from "@deessejs/functions";
import { z } from "zod";

// Mock database
const db = {
  users: [
    { id: 1, name: "Alice", email: "alice@example.com" },
    { id: 2, name: "Bob", email: "bob@example.com" },
  ],
  async find(id: number) {
    return this.users.find(u => u.id === id);
  },
  async create(data: any) {
    const user = { id: this.users.length + 1, ...data };
    this.users.push(user);
    return user;
  },
};

// Define context
const { t, createAPI } = defineContext<{
  userId: string;
  database: typeof db;
}>({
  userId: "admin-123",
  database: db,
});

// Create queries
const listUsers = t.query({
  args: z.object({}),
  handler: async (ctx) => {
    return success(ctx.database.users);
  },
});

const getUser = t.query({
  args: z.object({ id: z.number() }),
  handler: async (ctx, args) => {
    const user = await ctx.database.find(args.id);
    if (!user) {
      return failure(
        exception({ name: "NotFound", message: "User not found" })
      );
    }
    return success(user);
  },
});

// Create mutations
const createUser = t.mutation({
  args: z.object({
    name: z.string().min(2),
    email: z.string().email(),
  }),
  handler: async (ctx, args) => {
    const user = await ctx.database.create(args);
    return success(user);
  },
});

// Create API
const api = createAPI({
  users: t.router({
    list: listUsers,
    get: getUser,
    create: createUser,
  }),
});

// Use it
async function main() {
  // List all users
  const users = await api.users.list({});
  console.log("Users:", users.value);

  // Get a specific user
  const user = await api.users.get({ id: 1 });
  console.log("User:", user.value);

  // Create a new user
  const created = await api.users.create({
    name: "Charlie",
    email: "charlie@example.com",
  });
  console.log("Created:", created.value);
}

main();
```

## Type Safety

Everything is fully typed from end to end:

```ts
// TypeScript knows the exact types
const result = await api.users.get({ id: 1 });
//     ^? Result<User, Exception>

// Arguments are validated
await api.users.get({ id: "not-a-number" });
//     ^? Type error: id must be a number

// Returns are typed
if (result.ok) {
  console.log(result.value.name);
  //           ^? string
}
```

## Next Steps

Now that you have a basic API working, explore more features:

- [Context](/docs/context) - Learn more about context management
- [Router](/docs/router) - Organize your APIs with routers
- [Lifecycle Hooks](/docs/lifecycle-hooks) - Add middleware to your operations
- [Error Handling](/docs/error-handling) - Handle errors gracefully
- [Advanced Features](/docs/advanced) - Discover advanced patterns
